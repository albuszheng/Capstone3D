<!DOCTYPE html>
<html>
<head>
    <title>three.js</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <style>
        body {
            color: #000;
            font-weight: bold;

            background-color: #fff;
            margin: 0px;
            overflow: hidden;
        }
    </style>
</head>

<body>
<div id="container"></div>

<script src="js/three.js"></script>
<script src="js/TrackballControls.js"></script>
<script src="js/Detector.js"></script>
<script src="js/stats.min.js"></script>
<script src="js/ColladaLoader.js"></script>

<script>
    if ( ! Detector.webgl ) Detector.addGetWebGLMessage();

    var container, stats;
    var camera, controls, scene, renderer;
    var objects = [];

    init();
    animate();

    function init() {
        //camera
        camera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 1000 );
        camera.position.z = 10;

        controls = new THREE.TrackballControls( camera );

        controls.rotateSpeed = 1.0;
        controls.zoomSpeed = 1.2;
        controls.panSpeed = 0.8;

        controls.noZoom = false;
        controls.noPan = false;

        controls.staticMoving = true;
        controls.dynamicDampingFactor = 0.3;

        controls.keys = [ 65, 83, 68 ];

        controls.addEventListener( 'change', render );

        // scene
        scene = new THREE.Scene();

//        var geometry = new THREE.CylinderGeometry( 0, 10, 30, 4, 1 );
//        var material =  new THREE.MeshPhongMaterial( { color:0xffffff, shading: THREE.FlatShading } );
//
//        for ( var i = 0; i < 50; i ++ ) {
//
//            var mesh = new THREE.Mesh( geometry, material );
//            mesh.position.x = ( Math.random() - 0.5 ) * 1000;
//            mesh.position.y = ( Math.random() - 0.5 ) * 1000;
//            mesh.position.z = ( Math.random() - 0.5 ) * 1000;
//            mesh.updateMatrix();
//            mesh.matrixAutoUpdate = false;
//            scene.add( mesh );
//
//        }

//        var loader = new THREE.JSONLoader();
//        loader.load(
//                'model/sofa.js',
//                function ( geometry, materials ) {
//                    var material = new THREE.MultiMaterial( materials );
//                    var object = new THREE.Mesh( geometry, material );
//                    scene.add( object );
//                }
//        );

        // lights
        var light = new THREE.DirectionalLight( 0xffffff );
        light.position.set( 1, 1, 1 );
        scene.add( light );

        light = new THREE.DirectionalLight( 0x002288 );
        light.position.set( -1, -1, -1 );
        scene.add( light );

        light = new THREE.AmbientLight( 0x222222 );
        scene.add( light );

        // renderer
        renderer = new THREE.WebGLRenderer( { antialias: true } );
        renderer.setClearColor(0xFFFFFF, 1.0);
        renderer.setSize( window.innerWidth, window.innerHeight );
        renderer.sortObjects = false;

        container = document.getElementById( 'container' );
        container.appendChild( renderer.domElement );

        stats = new Stats();
        stats.domElement.style.position = 'absolute';
        stats.domElement.style.top = '0px';
        stats.domElement.style.zIndex = 100;
        container.appendChild( stats.domElement );

        // model
        var loader = new THREE.ColladaLoader();
//        loader.load(
//                'model/bed-b.dae',
//                function ( collada ) {
//                    var object = collada.scene;
//                    object.position.set(0, 0, 0);
//                    scene.add(object);
//                    objects.push(object);
//                },
//                // Function called when download progresses
//                function ( xhr ) {
//                    console.log( (xhr.loaded / xhr.total * 100) + '% loaded' );
//                }
//        );
//
//        loader.load(
//                'model/TV-a.dae',
//                function ( collada ) {
//                    var object = collada.scene;
//                    object.rotation.set(0, 0, 3.2);
//                    object.position.set(5, 1, 0);
//                    scene.add(object);
//                    objects.push(object);
//                },
//                // Function called when download progresses
//                function ( xhr ) {
//                    console.log( (xhr.loaded / xhr.total * 100) + '% loaded' );
//                }
//        );

        loader.load(
                'model/wall.dae',
                function ( collada ) {
                    var object = collada.scene;
                    object.position.set(-6, -3, 1);
                    scene.add(object);
                    objects.push(object);
                },
                // Function called when download progresses
                function ( xhr ) {
                    console.log( (xhr.loaded / xhr.total * 100) + '% loaded' );
                }
        );

        window.addEventListener( 'resize', onWindowResize, false );

        render();

    }

    function onWindowResize() {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();

        renderer.setSize( window.innerWidth, window.innerHeight );

        controls.handleResize();

        render();
    }

    function animate() {
        requestAnimationFrame( animate );
        renderer.render( scene, camera );
        controls.update();
    }

    function render() {
        renderer.render( scene, camera );
        stats.update();
    }


</script>

</body>
</html>
